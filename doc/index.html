<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.6.2
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><p><img src="https://raw.github.com/AgilTec/cadenero/master/cadenero.logo.png" alt="Cadenero Logo" />
By <a href="http://agiltec.github.io/"><img src="https://launchrock-assets.s3.amazonaws.com/logo-files/GpujzvLXPPqzAcz.png" alt="Agiltec Logo" /></a>.</p>

<p><a href="http://badge.fury.io/rb/cadenero"><img src="https://fury-badge.herokuapp.com/rb/cadenero.png" alt="Gem Version" /></a>
<a href="https://travis-ci.org/AgilTec/cadenero"><img src="https://travis-ci.org/AgilTec/cadenero.png?branch=master" alt="Build Status" /></a>
<a href="https://codeclimate.com/github/AgilTec/cadenero"><img src="https://codeclimate.com/github/AgilTec/cadenero.png" alt="Code Climate" /></a>
<a href="https://coveralls.io/r/AgilTec/cadenero?branch=master"><img src="https://coveralls.io/repos/AgilTec/cadenero/badge.png?branch=master" alt="Coverage Status" /></a>
<a href="https://gemnasium.com/AgilTec/cadenero"><img src="https://gemnasium.com/AgilTec/cadenero.png" alt="Dependency Status" /></a></p>

<p>THIS README IS FOR THE MASTER BRANCH OF <strong>CADENERO</strong> AND REFLECTS THE WORK CURRENTLY EXISTING ON THE MASTER BRANCH. IF YOU ARE WISHING TO USE A NON-MASTER BRANCH OF <strong>CADENERO</strong>, PLEASE CONSULT THAT BRANCH’S README AND NOT THIS ONE.</p>

<p>Authentication Engine for Rails.API multitenant RESTful APIs based on Warden. It:
* Is Racked based
* Use token authentication as strategy for the API
* Is RESTful API
* Allows you to have multiple roles (or models/scopes) signed in at the same time</p>

<h2 id="information">Information</h2>

<h3 id="why-cadenero">Why Cadenero?</h3>
<p><strong>“Cadenero”</strong> is the spanish word for <a href="http://en.wikipedia.org/wiki/Bouncer_(doorman\)">“Bouncer (doorman)”</a>. The main function of <strong>Cadenero</strong> is to be a resource for authenticating consumers of the services that the API provides. As the real bouncers, <strong>Cadenero</strong> aims to provide security, check authorized access, to refuse entry for intoxication, aggressive behavior or non-compliance with statutory or establishment rules.</p>

<p>You can use <a href="https://github.com/hassox/warden">Warden</a> or <a href="https://github.com/plataformatec/devise">Devise</a> directly but for API apps the rewritting and monkey patching can be messy.</p>

<h3 id="installing-cadenero">Installing <strong>Cadenero</strong></h3>

<h4 id="preconditions">Preconditions</h4>

<h5 id="postgresql">Postgresql</h5>
<p>You should have a Postgresql server (for downloading see: http://www.postgresql.org/download/). If you are using OSX, you can install using <a href="http://mxcl.github.io/homebrew/">Homebrew</a> for that you can follow the following this <a href="http://www.moncefbelyamani.com/how-to-install-postgresql-on-a-mac-with-homebrew-and-lunchy/">instructions</a></p>

<h5 id="ruby-19x-or-2x">Ruby 1.9.x or 2.x</h5>
<p>For that we recommend that you use <a href="https://github.com/sstephenson/rbenv">rbenv</a> with <a href="https://github.com/sstephenson/ruby-build">ruby-build</a> or <a href="https://rvm.io/">rvm</a></p>

<p>We use the standard <code>rake</code>, <code>bundler</code> and <code>gem</code></p>

<h5 id="gitgithub">Git/Github</h5>
<p>You are here. Then you know what to do ;-)</p>

<h4 id="setup">Setup</h4>

<p>Rails 3.2.13 is the master version used now by <strong>Cadenero</strong>, if you want to use Rails 4 goodness please use the branch “rails4”</p>

<p>Generate first your Rails app as usual using:</p>

<p><code>
    $ rails _3.2.13_ new your_app --skip-test-unit  -d postgresql
</code></p>

<p>In the <code>Gemfile</code> add the following lines:
```ruby
    gem ‘cadenero’, ‘~&gt; 0.0.2.b8’</p>

<pre class="code ruby"><code class="ruby">group :development, :test do
  gem 'rspec-rails', '~&gt; 2.14.0'
  gem 'capybara', '~&gt; 2.1.0'
  gem 'rack-test', '~&gt; 0.6.2'
end ```
</code></pre>

<p>In the <code>config/database.yml</code> replace the <code>sqlite3</code> adapter for <code>postgresql</code> as follow:</p>

<p>```
    development:
      adapter: postgresql
      encoding: unicode
      database: your_app_development 
      pool: 5
      min_messages: warning</p>

<pre class="code ruby"><code class="ruby">test:
  adapter: postgresql
  encoding: unicode
  database: your_app_test
  pool: 5
  min_messages: warning ```
</code></pre>

<p>Then run bundle, create the databases and run the generator:</p>

<p><code>
    $ bundle install; rake db:create; rails-api g cadenero:install
</code></p>

<p>Finally run the server:</p>

<p><code>
    $ rails-api s
</code></p>

<p>Or much better for checking the multitenancy you can use <a href="http://pow.cx/">Pow</a>. To install or upgrade Pow, open a terminal and run this command:</p>

<p><code>
    $ curl get.pow.cx | sh (View Source)
</code></p>

<p>To set up a Rack app, just symlink it into ~/.pow:</p>

<p><code>
    $ cd ~/.pow
    $ ln -s /path/to/myapp
</code></p>

<p>Check that you can access the API using the default account <code>www</code> and user <code>testy@example.com</code> with password `changeme˜ or those defined for you when the generator was run. Ror the client you can use <a href="http://curl.haxx.se/">cURL</a> or <a href="http://restclient.net/">RESTClient</a></p>

<p>You can create a new account as follows:</p>

<p><code>
    $ curl -v -X POST http://www.cadenero.dev/v1/accounts -H 'Content-Type: application/json' -d '{"account": { "name": "Testy", "subdomain": "tested1", "owner_attributes": {"email": "testy2@example.com", "password": "changeme", "password_confirmation": "changeme"}}}'
</code>
Or</p>

<p>```
    Request</p>

<pre class="code ruby"><code class="ruby">POST http://www.cadenero.dev/v1/accounts

    Content-Type: application/json

Body
{&quot;account&quot;: { &quot;name&quot;: &quot;Testy&quot;, &quot;subdomain&quot;: &quot;test2&quot;, &quot;owner_attributes&quot;: {&quot;email&quot;: &quot;testy2@example.com&quot;, &quot;password&quot;: &quot;changeme&quot;, &quot;password_confirmation&quot;: &quot;changeme&quot;}}} ```
</code></pre>

<p>Have fun!</p>

<h3 id="access-points">Access Points</h3>
<p><strong>Cadenero</strong> creates the following versioned routes for exposing the authentication RESTful API</p>

<p><code>
            v1_root        /v1(.:format)           cadenero/v1/account/dashboard#index {:default=&gt;:json}
        v1_sessions POST   /v1/sessions(.:format)  cadenero/v1/account/sessions#create {:default=&gt;:json}
                    DELETE /v1/sessions(.:format)  cadenero/v1/account/sessions#delete {:default=&gt;:json}
           v1_users POST   /v1/users(.:format)     cadenero/v1/account/users#create {:default=&gt;:json}
                 v1 GET    /v1/users/:id(.:format) cadenero/v1/account/users#show {:default=&gt;:json}
        v1_accounts POST   /v1/accounts(.:format)  cadenero/v1/accounts#create {:default=&gt;:json}
               root        /                       cadenero/v1/account/dashboard#index {:default=&gt;:json}
</code></p>

<p>You can check them running:</p>

<p><code>
    $ rake routes
</code>
### Strategies
For authentication <strong>Cadenero</strong> has two default Warden Strategies:
  * <strong>Password</strong>. That expect that the client to keep a session cookie and using for authentication the user <code>email</code> and <code>password</code>.
  * <strong>Token Authentication</strong>. That is stateless and expects that for each request the user include the <code>auth_token</code> as a key-value of the request params.</p>

<p>In any case when you signed up <strong>Cadenero</strong> creates an auth_token for the membership to the account that you signed up.</p>

<p>If you want to know more about Warden Strategies see: https://github.com/hassox/warden/wiki/Strategies</p>

<h3 id="documentation">Documentation</h3>
<p>You can review the YARD docs in: http://rubydoc.info/github/AgilTec/cadenero/frames</p>

<h3 id="the-cadenero-task-list">The Cadenero Task List</h3>
<ul>
  <li>[x] Specs for the code 100% Coverage using BDD with <a href="https://github.com/rspec/rspec">Rspec</a> and <a href="https://github.com/jnicklas/capybara">Capybara</a></li>
  <li>[x] Documentation for all the code</li>
  <li>[ ] Examples of use and demo</li>
</ul>

<h3 id="versions">Versions</h3>
<p><strong>Cadenero</strong> aims to adhere to <a href="http://semver.org/">Semantic Versioning 2.0.0</a> the current version is: 0.0.2-b8 meaning MAJOR.MINOR.PATCH format. Violations of this scheme should be reported as bugs. Specifically, if a minor or patch version is released that breaks backward compatibility, that version should be immediately yanked and/or a new version should be immediately released that restores compatibility. Breaking changes to the public API will only be introduced with new major versions. As a result of this policy, you can (and should) specify a dependency on this gem using the <a href="http://docs.rubygems.org/read/chapter/16#page74">Pessimistic Version Constraint</a> with two digits of precision. For example:</p>

<p><code>
    spec.add_dependency 'cadenero', '~&gt; 1.0'
</code></p>

<h3 id="bug-reports">Bug reports</h3>

<p>If you discover a problem with <strong>Cadenero</strong>, we would like to know about it. However, we ask that you please review these guidelines before submitting a bug report:</p>

<p>https://github.com/AgilTec/cadenero/wiki/Bug-reports</p>

<p>To submit the bug or issue go to: https://github.com/AgilTec/cadenero/issues</p>

<p>If you found a security bug, do <em>NOT</em> use the GitHub issue tracker. Send an email to the maintainers listed at the bottom of the README please.</p>

<h3 id="contributing">Contributing</h3>

<p>We hope that you will consider contributing to <strong>Cadenero</strong>. You’re encouraged to submit pull requests, propose features and discuss issues.</p>

<ul>
  <li>Fork the project</li>
  <li>Write test for your new feature or a test that reproduces a bug</li>
  <li>Implement your feature or make a bug fix</li>
  <li>Commit, push and make a pull request. Bonus points for topic branches.</li>
</ul>

<p>You will usually want to write tests for your changes using BDD tools as RSpec, Rack::Test and Capybara.</p>

<p>To run the test suite, go into <strong>Cadenero</strong>’s top-level directory and run <code>bundle install</code> and <code>rspec spec</code>.  For the tests to pass, you will need to have a Postgresql server running on your system.</p>

<p>If you have not contribute before in a Github repo please review first:</p>

<ul>
  <li><a href="https://help.github.com/articles/fork-a-repo">Fork A Repo</a></li>
  <li><a href="https://help.github.com/articles/using-pull-requests">Using Pull Requests</a></li>
</ul>

<h4 id="running-the-specs">Running the Specs</h4>
<p><strong>Cadenero</strong> use <a href="https://github.com/rspec/rspec">RSpec</a> and <a href="https://github.com/jnicklas/capybara">Capybara</a>. To run the specs you only need to do:</p>

<p><code>
    $ RAILS_ENV=test bundle exec rake db:create
    $ RAILS_ENV=test bundle exec rake db:migrate
    $ bundle exec rspec spec
</code></p>

<p>You can <code>binstub</code> the command bins to avoid writing <code>bundle exec</code>. You only need to write:
<code>
    $ bundle binstubs rspec-core
    $ bundle binstubs rake
</code></p>

<h3 id="warden">Warden</h3>

<p><strong>Cadenero</strong> is based on <a href="https://github.com/hassox/warden">Warden</a>, which is a general Rack authentication framework created by Daniel Neighman. We encourage you to read more about Warden here: https://github.com/hassox/warden/wiki</p>

<h4 id="devise">Devise</h4>
<p>Some code and architectural decisions in <strong>Cadenero</strong> have been inspired for the excellent gem <a href="https://github.com/plataformatec/devise">Devise</a>.</p>

<h3 id="railsapi">Rails::API</h3>

<p><strong>Cadenero</strong> is a Rails::API Engine, Rails::API is a subset of a normal Rails application, created for applications that don’t require all functionality that a complete Rails application provides. It is a bit more lightweight, and consequently a bit faster than a normal Rails application. The main example for its usage is in API applications only, where you usually don’t need the entire Rails middleware stack nor template generation. Rails::API was created by Santiago Pastorino. We encourage you to read more about Rails::API here: https://github.com/rails-api/rails-api</p>

<h3 id="multitenancy-with-rails-and-subscriptions-too">Multitenancy with Rails And subscriptions too!</h3>
<p>Parts of the code of <strong>Cadenero</strong> have been based on the excellent work of <a href="https://github.com/radar">Ryan Bigg</a> in his book <a href="https://leanpub.com/multi-tenancy-rails">“Multitenancy with Rails And subscriptions too!”</a> but modified to be use in a RESTful API</p>

<h3 id="maintainers">Maintainers</h3>

<ul>
  <li><a href="https://github.com/mvidaurre">Manuel Vidaurre</a></li>
</ul>

<h2 id="license">License</h2>

<p>MIT License. Copyright 2013 AgilTec. http://agiltec.com.mx</p>

<p>You are not granted rights or licenses to the trademarks of the AgilTec, including without limitation the <strong>Cadenero</strong> name or logo.</p>

<p>This project rocks and uses MIT-LICENSE.</p>
</div></div>

    <div id="footer">
  Generated on Wed Jul 17 22:56:11 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.6.2 (ruby-1.9.3).
</div>

  </body>
</html>